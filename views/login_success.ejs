<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Login Successful - <%= shopData.shopName %>
    </title>
    <script>
        // Use JavaScript redirect to handle base path correctly
        setTimeout(function () {
            // Get the base path from current location
            var basePath = window.location.pathname.substring(0, window.location.pathname.indexOf('/users/loggedin'));
            var redirectPath = '<%= redirectUrl %>';
            // If redirectPath starts with /, it's absolute from app root
            if (redirectPath.startsWith('/')) {
                window.location.href = basePath + redirectPath;
            } else {
                window.location.href = redirectPath;
            }
        }, 2000);
    </script>
    <link rel="stylesheet" type="text/css" href="/main.css" />
</head>

<body>
    <h1>Login Successful!</h1>
    <p>Welcome back, <strong>
            <%= username %>
        </strong>!</p>
    <p>Redirecting you back in 2 seconds...</p>
    <p>If not redirected, <a href="#"
            onclick="event.preventDefault(); var basePath = window.location.pathname.substring(0, window.location.pathname.indexOf('/users/loggedin')); var redirectPath = '<%= redirectUrl %>'; window.location.href = redirectPath.startsWith('/') ? basePath + redirectPath : redirectPath;">click
            here</a>.</p>
</body>

</html>